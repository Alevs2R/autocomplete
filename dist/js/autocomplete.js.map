{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 232e1f22a2e365e7258f","webpack:///./js/dropdown.js","webpack:///./scss/core.scss","webpack:///./js/core.js"],"names":["Dropdown","baseElement","options","minHeight","maxHeight","position","dropdownPosition","displayedProperty","wordEndings","isCreated","isVisible","activeElement","undefined","elementsList","dropdown","isLoaderShown","handleEvent","e","type","_keyDownEvent","NOTHING_FOUND","LOADING","keynumCodes","UP","DOWN","ENTER","ESC","loader","prototype","_create","document","createElement","className","style","visibility","addEventListener","stopPropagation","body","appendChild","_createElement","element","val","hasOwnProperty","search","property","str","pos","length","substr","li","innerHTML","_clickEvent","bind","listRow","_createElementsList","elements","result","row","overflow","_createLoader","div","span","createTextNode","_createEmptyMessage","showLoader","clear","_show","showError","CONNECTION_ERROR","RELOAD","reloadBtn","reload","onEnterClick","showList","list","maxResults","ul","setActiveElement","firstChild","slice","_getSummary","select","num","total","text","event","target","_getHeight","availableSpace","Math","min","max","_getCoords","elem","box","getBoundingClientRect","docEl","documentElement","scrollTop","window","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","top","left","round","bottom","offsetHeight","_updateWidth","WIDTH_INCREASE","leftOffset","coordLeft","maxWidth","clientWidth","minWidth","offsetWidth","width","getElementsByTagName","display","_setListHeight","totalHeight","summaryHeight","OFFSET_INPUT","coords","offsetBottom","clientHeight","offsetTop","_resetVars","remove","parentNode","removeChild","keyDownEvent","preventdef","keyCode","nextSibling","previousSibling","preventDefault","require","module","exports","AutocompleteFactory","extend","s","b","a","Object","assign","prop","Autocomplete","defaultOptions","setInput","setData","source","err","console","error","input","_selectElement","_search","value","_bindInputEvents","_onFocusEvent","_onClickOutside","lastSearch","selected","sourceIsDynamic","messages","warning","Array","data","map","sort","p","sortBy","v","sortOrder","querySelector","tagName","_finishTyping","onselect","_focusToNextControl","_makeRequest","url","Promise","resolve","reject","xhr","abort","XMLHttpRequest","open","onload","status","JSON","parse","responseText","statusText","onerror","send","_abortRequest","dataRequestFinished","_loadData","that","callback","then","catch","setTimeout","interval","setInterval","clearInterval","testByEntry","replace","indexOf","_getSearchResult","searchData","startsWith","lValue","caseSensitive","toLowerCase","isValidElement","String","searchByEntry","push","trim","_validate","ownValue","classList","add","_showUnderInput","messageUnderInput","removeEventListener","blur","next","tabIndex","inputs","call","focus"],"mappings":"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","file":"js/autocomplete.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Autocomplete\"] = factory();\n\telse\n\t\troot[\"Autocomplete\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 232e1f22a2e365e7258f","export default Dropdown;\n\nfunction Dropdown(baseElement, options) {\n    this.minHeight = options.minHeight;\n    this.maxHeight = options.maxHeight;\n    this.baseElement = baseElement;\n    this.position = options.dropdownPosition;\n    this.displayedProperty = options.displayedProperty;\n    this.wordEndings = options.wordEndings;\n\n\n    this.isCreated = false;\n    this.isVisible = false;\n    this.activeElement = undefined;\n    this.elementsList = null;\n    this.dropdown = null;\n    this.isLoaderShown = false;\n\n\n    this.handleEvent = function (e) {\n        switch (e.type) {\n            case \"keydown\":\n                this._keyDownEvent(e);\n        }\n    };\n}\n\nconst NOTHING_FOUND = 'Не найдено';\nconst LOADING = 'Загрузка';\n\nconst keynumCodes = {\n    UP: 38,\n    DOWN: 40,\n    ENTER: 13,\n    ESC: 27\n};\n\nconst loader = '<svg class=\"circle\" width=\"16\" height=\"16\"><circle class=\"path\" cx=\"8\" cy=\"8\" r=\"6\" stroke-miterlimit=\"10\"/></svg>';\n\nDropdown.prototype = {\n\n    _create(){\n        let dropdown = document.createElement('div');\n        dropdown.className = 'autocomplete-dropdown';\n        dropdown.style.visibility = 'hidden';\n        dropdown.addEventListener('click', (e)=>e.stopPropagation());\n\n\n        document.body.appendChild(dropdown);\n        this.dropdown = dropdown;\n\n        this.isCreated = true;\n    },\n\n    _createElement(element){\n        let val;\n        if (element.hasOwnProperty('search') && element.search.property == this.displayedProperty) {\n            let str = element[this.displayedProperty];\n            let {pos, length} = element.search;\n            val = str.substr(0, pos) + '<b>' + str.substr(pos, length) + '</b>' + str.substr(pos + length);\n        }\n        else {\n            val = element[this.displayedProperty];\n        }\n\n        let li = document.createElement('li');\n        li.innerHTML = val;\n        li.addEventListener('click', this._clickEvent.bind(this));\n        li.listRow = element;\n\n        return li;\n    },\n\n    _createElementsList(elements){\n        let result = document.createElement('ul');\n\n        for (let row of elements) {\n            result.appendChild(this._createElement(row));\n        }\n\n        result.addEventListener('mouseover', function () {\n            document.body.style.overflow = 'hidden';\n        });\n        result.addEventListener('mouseout', function () {\n            document.body.style.overflow = 'auto';\n        });\n\n        return result;\n    },\n\n    _createLoader(){\n        let div = document.createElement('div');\n        div.className = \"loader\";\n        div.innerHTML = loader;\n        let span = document.createElement('span');\n        span.appendChild(document.createTextNode(LOADING));\n        div.appendChild(span);\n        return div;\n    },\n\n    _createEmptyMessage(){\n        let div = document.createElement('div');\n        div.appendChild(document.createTextNode(NOTHING_FOUND));\n        return div;\n    },\n\n    showLoader(){\n        if (this.isLoaderShown) return;\n        this.clear();\n        this.dropdown.appendChild(this._createLoader());\n        this._show();\n        this.isLoaderShown = true;\n    },\n\n    showError(){\n        const CONNECTION_ERROR = 'Что-то пошло не так. Проверьте соединение с интернетом и попробуйте еще раз';\n        const RELOAD = 'Обновить';\n\n        this.clear();\n        let div = document.createElement('div');\n        div.appendChild(document.createTextNode(CONNECTION_ERROR));\n\n        let reloadBtn = document.createElement('div');\n        reloadBtn.className = 'autocomplete-control';\n        reloadBtn.appendChild(document.createTextNode(RELOAD));\n\n        reloadBtn.addEventListener('click', ()=>this.reload());\n        this.onEnterClick = () => this.reload();\n\n        this.dropdown.appendChild(div);\n        this.dropdown.appendChild(reloadBtn);\n\n        this._show();\n    },\n\n    showList(list, maxResults = null){\n        this.clear();\n\n        if (list.length == 0) this.dropdown.appendChild(this._createEmptyMessage());\n        else {\n            if (maxResults == null || list.length <= maxResults) {\n                let ul = this._createElementsList(list);\n                this.dropdown.appendChild(ul);\n                this.setActiveElement(ul.firstChild);\n            } else {\n                let ul = this._createElementsList(list.slice(0, maxResults));\n                this.dropdown.appendChild(ul);\n                this.setActiveElement(ul.firstChild);\n                this.dropdown.appendChild(this._getSummary(maxResults, list.length));\n            }\n\n            this.onEnterClick = () => this.select(this.activeElement.listRow);\n        }\n\n\n        //if (!this.isVisible) {\n        this._show();\n        //}\n        //else this._updateWidth();\n    },\n\n    _getSummary(num, total){\n        let div = document.createElement('div');\n        let str = (total % 100 != 11 && total % 10 == 1) ? 'найденного ' + this.wordEndings[0] : 'найденных ' + this.wordEndings[1];\n        let text = 'Показано ' + num + ' из ' + total + ' ' + str + '. Уточните запрос, чтобы увидеть остальные';\n        div.appendChild(document.createTextNode(text));\n        div.className = \"autocomplete-summary\";\n        return div;\n    },\n\n    _clickEvent(event){\n        this.select(event.target.listRow);\n    },\n\n    _getHeight(availableSpace){\n        return Math.min(Math.max(this.minHeight, availableSpace), this.maxHeight);\n    },\n\n    _getCoords(elem) { // crossbrowser version\n        var box = elem.getBoundingClientRect();\n\n        var body = document.body;\n        var docEl = document.documentElement;\n\n        var scrollTop = window.pageYOffset || docEl.scrollTop || body.scrollTop;\n        var scrollLeft = window.pageXOffset || docEl.scrollLeft || body.scrollLeft;\n\n        var clientTop = docEl.clientTop || body.clientTop || 0;\n        var clientLeft = docEl.clientLeft || body.clientLeft || 0;\n\n        var top = box.top + scrollTop - clientTop;\n        var left = box.left + scrollLeft - clientLeft;\n\n        return {top: Math.round(top), bottom: Math.round(top) + elem.offsetHeight, left: Math.round(left)};\n    },\n\n    _updateWidth(){\n        const WIDTH_INCREASE = 30;\n\n        let leftOffset = this.dropdown.coordLeft;\n\n        let maxWidth = document.body.clientWidth - leftOffset;\n        let minWidth = Math.min(this.baseElement.offsetWidth + WIDTH_INCREASE, maxWidth);\n\n        let width;\n        let ul = this.dropdown.getElementsByTagName('ul');\n        if (ul.length > 0) {\n            this.dropdown.style.width = 'auto';\n            width = Math.min(Math.max(minWidth, ul[0].offsetWidth + 1), maxWidth);\n            ul[0].style.width = '100%';\n            ul[0].style.display = 'block';\n\n        }\n        else width = minWidth;\n        this.dropdown.style.width = width + 'px';\n    },\n\n    _setListHeight(totalHeight){\n        const summaryHeight = 42;\n        let ul = this.dropdown.getElementsByTagName('ul');\n        if (ul.length > 0) {\n            if (this.dropdown.getElementsByTagName('div').length > 0) {\n                ul[0].style.maxHeight = (totalHeight - summaryHeight) + 'px';\n            }\n            else ul[0].style.maxHeight = totalHeight + 'px';\n        }\n    },\n\n    _show(){\n        if (!this.isCreated) return;\n\n        const OFFSET_INPUT = 2;\n\n        let coords = this._getCoords(this.baseElement);\n        let offsetBottom = document.body.clientHeight - coords.bottom;\n\n        if (this.position == 'top' || (this.position == 'auto' && offsetBottom < this.minHeight)) {\n            this._setListHeight(this._getHeight(coords.top - OFFSET_INPUT));\n            this.dropdown.style.bottom = document.body.clientHeight - coords.top + OFFSET_INPUT + 'px';\n        }\n        else {\n            this.dropdown.style.top = (coords.top + this.baseElement.offsetHeight + OFFSET_INPUT) + \"px\";\n            this._setListHeight(this._getHeight(offsetBottom - OFFSET_INPUT));\n        }\n\n        this.dropdown.coordLeft = coords.left;\n        this.dropdown.style.left = coords.left + 'px';\n\n        this._updateWidth();\n\n        this.dropdown.style.visibility = 'visible';\n\n        this.isVisible = true;\n        //TODO reaction on window resize\n    },\n\n    setActiveElement(elem){\n        if (this.activeElement) this.activeElement.className = '';\n        elem.className = 'active';\n        this.activeElement = elem;\n\n        let offsetTop = elem.offsetTop,\n            offsetBottom = offsetTop + 30;\n        let ul = this.dropdown.getElementsByTagName('ul')[0];\n        if (ul.scrollTop + ul.clientHeight < offsetBottom) {\n            ul.scrollTop = offsetBottom - ul.clientHeight;\n        }\n        else if (offsetTop < ul.scrollTop) {\n            ul.scrollTop = offsetTop;\n        }\n    },\n\n    _resetVars(){\n        this.isCreated = false;\n        this.isVisible = false;\n        this.activeElement = null;\n        this.isLoaderShown = false;\n    },\n\n    remove(){\n        if (!this.isCreated) return;\n\n        this._resetVars();\n        this.dropdown.parentNode.removeChild(this.dropdown);\n        document.body.style.overflow = 'auto';\n    },\n\n    clear(){\n        this.isLoaderShown = false;\n        this.activeElement = null;\n        if (!this.isCreated) this._create();\n        else {\n            this.dropdown.innerHTML = '';\n        }\n    },\n\n    select(){\n        // callback, should be set by client\n    },\n\n    keyDownEvent(event){\n        let preventdef = true;\n        switch (event.keyCode) {\n            case keynumCodes.DOWN:\n                if (!this.activeElement || !this.activeElement.nextSibling) return;\n                this.setActiveElement(this.activeElement.nextSibling);\n                break;\n            case keynumCodes.UP:\n                if (!this.activeElement || !this.activeElement.previousSibling) return;\n                this.setActiveElement(this.activeElement.previousSibling);\n                break;\n            case keynumCodes.ENTER:\n                if (this.onEnterClick) this.onEnterClick();\n                break;\n            case keynumCodes.ESC:\n                this.remove();\n                break;\n            default:\n                preventdef = false;\n                break;\n        }\n        if (preventdef) event.preventDefault();\n    },\n\n}\n;\n\n\n\n// WEBPACK FOOTER //\n// ./js/dropdown.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scss/core.scss\n// module id = 1\n// module chunks = 0","require('../scss/core.scss');\nimport Dropdown from \"./dropdown\";\n\nmodule.exports = AutocompleteFactory;\n\n// extend objects\nfunction extend(s, b) {\n    var a = {};\n    Object.assign(a, s);\n    for (var prop in b) {\n        a[prop] = b[prop];\n    }\n    return a;\n}\n\nfunction AutocompleteFactory(elem, options) {\n    return new Autocomplete(elem, options);\n}\n\nconst defaultOptions = {\n    'source': null,\n    'arrow': false,\n    'maxResults': 5,\n    'minHeight': 200,\n    'maxHeight': 450,\n    'displayedProperty': \"value\",\n    'dropdownPosition': \"auto\",\n    'sort': false,\n    'sortBy': null,\n    'sortOrder': 'asc',\n    'isValidElement': ()=>true,\n    'searchByEntry': false,\n    'caseSensitive': false,\n    'wordEndings': null,\n    'ownValue': false\n};\n\nfunction Autocomplete(elem, options) {\n\n    this.options = extend(defaultOptions, options);\n\n    try {\n        this.setInput(elem);\n        this.setData(this.options.source);\n    } catch (err) {\n        window.console.error(err);\n        return;\n    }\n\n    this.dropdown = new Dropdown(this.input, this.options);\n\n    this.dropdown.select = this._selectElement.bind(this);\n\n    this.dropdown.reload = function () {\n        this._search(this.input.value);\n    }.bind(this);\n\n    this._bindInputEvents();\n\n    this.handleEvent = function (e) {\n        switch (e.type) {\n            case \"focus\":\n                this._onFocusEvent();\n                break;\n            case \"input\":\n                this._search(this.input.value);\n                break;\n            case \"keydown\":\n                this._keyDownEvent(e);\n                break;\n        }\n    };\n\n    this._onClickOutside = this._onClickOutside.bind(this);\n\n    this.lastSearch = null;\n    this.selected = undefined;\n    this.sourceIsDynamic = false;\n}\n\nAutocomplete.prototype = {\n    messages: {\n        error: 'Выберите значение из списка',\n        warning: 'Значения нет в справочнике. <br> Возможно, вы ошиблись в написании'\n    },\n\n    setData(source){\n        if (typeof source == 'string') {\n            this.source = source; // data will be loaded later\n        }\n        else if (typeof source == 'function') {\n            this.source = source;\n            this.sourceIsDynamic = true;\n        }\n        else {\n            if (!(source instanceof Array)) throw 'source should be instance of Array or String';\n            let data;\n            if (typeof source[0] == 'string') {\n                data = source.map(str => {\n                    value: str\n                });\n                this.options.displayedProperty = 'value';\n            }\n            else data = source;\n            this.data = this.sort(data);\n        }\n    },\n\n    sort(data){\n        if (!this.options.sort) return;\n        let p = this.options.sortBy ? this.options.sortBy : this.options.displayedProperty;\n        let v = this.options.sortOrder == 'asc' ? -1 : 1;\n        let result = data.sort(function (a, b) {\n            if (a[p] < b[p]) return v;\n            if (a[p] > b[p]) return -v;\n            return 0;\n        });\n        return result;\n    },\n\n    setInput(elem){\n        if (typeof elem == 'string') this.input = document.querySelector(elem);\n        else if (elem.hasOwnProperty('tagName') && elem.tagName == 'input') this.input = elem;\n        else throw '1 argument should be String or instance of Element with tagName input';\n    },\n\n    _selectElement(element){\n        this.input.value = element[this.options.displayedProperty];\n        this.selected = element;\n        this._finishTyping();\n        this.onselect(element);\n    },\n\n    onselect(){\n        // callback, should be set by client\n    },\n\n    _bindInputEvents(){\n        this.input.addEventListener(\"input\", this, false);\n        this.input.addEventListener(\"focus\", this, false);\n    },\n\n    _keyDownEvent(event){\n        if (this.dropdown.isVisible) this.dropdown.keyDownEvent(event);\n        if (event.keyCode == 9 || event.keyCode == 13) { // tab or enter\n            this._finishTyping();\n            this._focusToNextControl();\n        }\n    },\n\n    _makeRequest(url){\n        return new Promise(function (resolve, reject) {\n            if (this.xhr) this.xhr.abort();\n\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', url);\n            xhr.onload = function () {\n                if (this.status >= 200 && this.status < 300) {\n                    resolve(JSON.parse(xhr.responseText));\n                } else {\n                    reject({\n                        status: this.status,\n                        statusText: xhr.statusText\n                    });\n                }\n            };\n            xhr.onerror = function () {\n                reject({\n                    status: this.status,\n                    statusText: xhr.statusText\n                });\n            };\n            xhr.send();\n            this.xhr = xhr;\n        }.bind(this));\n    },\n\n    _abortRequest(){\n        if (this.xhr) this.xhr.abort();\n        this.dataRequestFinished = true;\n    },\n\n    _loadData(url){\n        var that = this;\n\n        return new Promise(function (resolve, reject) {\n\n            let callback;\n            that.dataRequestFinished = false;\n\n            that._makeRequest(url)\n                .then(data => {\n                    callback = () => resolve(data)\n                })\n                .catch(error => {\n                    callback = () => reject(error)\n                })\n                .then(() => {\n                    that.dataRequestFinished = true;\n                    if (!that.dropdown.isLoaderShown) callback();\n                });\n\n            setTimeout(function () {\n                if (!that.dataRequestFinished) {\n                    that.dropdown.showLoader();\n                    let interval = setInterval(function () {\n                        if (that.dataRequestFinished) {\n                            clearInterval(interval);\n                            if (callback) callback();\n                        }\n                    }, 1000);\n                }\n            }, 500);\n        });\n    },\n\n    testByEntry(str, search){\n        str = ' ' + str.replace(/\"/g, \"\");\n        return str.indexOf(' ' + search);\n\n    },\n\n    _getSearchResult(value){\n        let searchData;\n        if (this.lastSearch && value.startsWith(this.lastSearch.value)) {\n            searchData = this.lastSearch.result;\n        }\n        else searchData = this.data;\n        if (!this.data) return [];\n\n        let lValue = this.options.caseSensitive ? value : value.toLowerCase();\n\n        let result = [];\n        for (let row of this.data) {\n            if (!this.options.isValidElement(row)) continue;\n\n            if (row[this.options.displayedProperty] == value) this.selected = row;\n\n            for (let property in row) {\n                if (row.hasOwnProperty(property)) {\n                    let str = this.options.caseSensitive ? String(row[property]) : String(row[property]).toLowerCase();\n                    if (this.options.searchByEntry) {\n\n                        let pos = this.testByEntry(str, lValue);\n                        if (pos != -1) {\n                            row.search = {\n                                pos, property,\n                                length: lValue.length,\n                            };\n                            result.push(row);\n                            break;\n                        }\n                    }\n                    else {\n                        if (str.startsWith(lValue)) {\n                            result.push(row);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n        this.lastSearch = {value, result};\n        return result;\n    },\n    _search(value){\n        this.selected = null;\n        if (value) {\n            if (this.sourceIsDynamic) {\n                this._loadData(this.source(value))\n                    .then(data => this.dropdown.showList(this.sort(data), this.options.maxResults))\n                    .catch(err => this.dropdown.showError());\n            }\n            else {\n                if (this.data)\n                    this.dropdown.showList(this._getSearchResult(value.trim()), this.options.maxResults);\n                else {\n                    this._loadData(this.source)\n                        .then(data => {\n                            this.data = this.sort(data);\n                            this.dropdown.showList(this._getSearchResult(value.trim()), this.options.maxResults);\n                        }, this.options.maxResults)\n                        .catch(err => this.dropdown.showError())\n                }\n            }\n        }\n        else this.dropdown.remove();\n    },\n\n    _validate(){\n        if (!this.selected) {\n            if (this.options.ownValue) {\n                this.input.classList.add('warning');\n                this._showUnderInput(this.messages.warning, 'warning');\n            }\n            else {\n                this.input.classList.add('error');\n                this._showUnderInput(this.messages.error, 'error');\n            }\n        }\n        else this.input.classList.add('fulfilled');\n    },\n\n    _onFocusEvent(){\n        document.body.addEventListener('click', this._onClickOutside);\n        this.input.className = 'autocomplete';\n        if (this.messageUnderInput) {\n            this.input.parentNode.removeChild(this.messageUnderInput);\n            this.messageUnderInput = null;\n        }\n\n        //if(!this.selected && this.lastSearch) this.dropdown.showList(this.lastSearch.result, this.options.maxResults);\n        this.input.select();\n        this.lastSearch = null;\n\n        document.addEventListener('keydown', this);\n    },\n\n    _onClickOutside(event){\n        if(event.target == this.input) return;\n        this._finishTyping();\n    },\n\n    _finishTyping(){\n\n\n        if (!this.dataRequestFinished) this._abortRequest();\n\n        if (!this.selected && this.lastSearch && this.lastSearch.result.length == 1) {\n            let elem = this.lastSearch.result[0];\n            this._selectElement(elem);\n        }\n        this.dropdown.remove();\n        this._validate();\n        document.body.removeEventListener('click', this._onClickOutside);\n        document.removeEventListener('keydown', this);\n        this.input.removeEventListener('click', this);\n    },\n\n    _showUnderInput(text, className){\n        let div = document.createElement('div');\n        div.classList.add('autocomplete-message');\n        div.classList.add(className);\n        div.innerHTML = text;\n        div.style.top = this.input.offsetHeight;\n\n        this.input.parentNode.appendChild(div);\n        this.messageUnderInput = div;\n    },\n\n    _focusToNextControl(){\n        this.input.blur();\n        let next = document.querySelector('[tabIndex=\"' + (+this.input.tabIndex + 1) + '\"]');\n        if (!next) {\n            let inputs = Array.prototype.slice.call(document.getElementsByTagName('input'));\n            next = inputs[inputs.indexOf(this.input) + 1];\n        }\n        if (next) next.focus();\n    }\n\n};\n\n\n// WEBPACK FOOTER //\n// ./js/core.js"],"sourceRoot":""}