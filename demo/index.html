<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Автокомплит | Демо</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="../dist/css/autocomplete.css">
</head>
<body>
<div class="content">
    <section>
        <h1>Автокомплит <span>Autocomplete</span></h1>
        <p> Поле ввода с подсказками на чистом JavaScript</p>
    </section>
    <section>
        <h2>Пример</h2>
        <p>Автокомплит списка городов</p>
        <div class="demo">
            <label for="city">Город</label>
            <div class="autocomplete-wrapper">
                <input id="city" type="text" class="autocomplete" placeholder="Начните вводить код или название">
            </div>
        </div>
    </section>
    <section class="install">
        <h2>Установка</h2>
        <h3>1. Подключите JS и CSS файлы</h3>
        <p>Собранные и минифицированные файлы содержатся в папке <a href="https://github.com/Alevs2R/autocomplete/tree/master/dist">dist/</a> в <a href="https://github.com/Alevs2R/autocomplete">GitHub</a>
            репозитории.
            Скопируйте содержимое папки в ваш проект.
            Sass и исходные JS файлы содержатся в папке <a href="https://github.com/Alevs2R/autocomplete/tree/master/src">src/</a>, но перед использованием их необходимо
            собрать.
        </p>
        <p>Вставьте данные строчки кода в ваш HTML</p>

        <pre class="  language-markup"><code class="  language-markup"><span class="token tag"><span
                class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
                class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span
                class="token attr-name">href</span><span class="token attr-value"><span
                class="token punctuation">=</span><span
                class="token punctuation">"</span>path/to/autocomplete.min.css<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span
        class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>path/to/autocomplete.min.js<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span
                    class="token script language-javascript"></span><span class="token tag"><span
                    class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
                    class="token punctuation">&gt;</span></span></code></pre>

        <p>CSS рекомендуется вставлять в <code class="language-markup">&lt;head&gt;</code>, а JS перед <code
                class="language-markup">&lt;/body&gt;</code></p>

        <h3>2. Вставьте HTML</h3>
        <pre class="  language-markup"><code class="  language-markup"><span class="token tag"><span
                class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span
                class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>autocomplete-wrapper<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span
            class="token attr-name">id</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>city<span
            class="token punctuation">"</span></span> <span class="token attr-name">type</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span
            class="token punctuation">"</span></span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>autocomplete<span
            class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Начните вводить код или название<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
        class="token punctuation">&gt;</span></span></code></pre>
        <h3>3. Инициализируйте JS</h3>
        <pre class="  language-javascript"><code class="  language-javascript"><span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    source<span class="token punctuation">:</span> <span class="token string">'kladr.json'</span><span class="token punctuation">,</span>
    displayedProperty<span class="token punctuation">:</span> <span class="token string">'City'</span><span class="token punctuation">,</span>
    wordEndings<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'города'</span><span class="token punctuation">,</span><span class="token string">'городов'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">Autocomplete</span><span class="token punctuation">(</span><span class="token string">'.autocomplete'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>        <p>
            Первый аргумент – селектор (<code class="language-javascript">String</code>) или объект <code
                class="language-javascript">Element</code><br>
            Второй аргумент – опции (<code class="language-javascript">Object</code>)
        </p>
    </section>
    <section class="usage">
        <h2>Опции</h2>
        <p>Автокомплит имеет разные настройки, которые можно передать в конструктор при инициализации</p>
        <table>
            <thead>
            <tr>
                <th>Опция</th>
                <th>Значения</th>
                <th>По умолчанию</th>
                <th>Описание</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>source (обязательная)</td>
                <td>String, function или массив объектов (в частности, массив строк)</td>
                <td>null</td>
                <td>
                    Ссылка на источник данных в формате JSON или массив. Если это массив строк, опция displayedProperty
                    игнорируется. Функция принимает первым аргументом строку запроса и должна возвращать адрес источника
                    данных.
                </td>
            </tr>
            <tr>
                <td>arrow</td>
                <td>true, false</td>
                <td>false</td>
                <td>
                    Если true, автокомплит со стрелкой, иначе без
                </td>
            </tr>
            <tr>
                <td>displayedProperty</td>
                <td>String</td>
                <td>value</td>
                <td>
                    Свойство объекта, значение которого будет отображаться в выпадающем списке
                </td>
            </tr>
            <tr>
                <td>wordEndings</td>
                <td>Array(2)</td>
                <td>null</td>
                <td>
                    Слова в родительном падеже (обозначают сущность поиска). Например, ['города','городов'].
                </td>
            </tr>
            <tr>
                <td>dropdownPosition</td>
                <td>top, bottom, auto</td>
                <td>auto</td>
                <td>
                    Определяет, с какой стороны от поля ввода появится выпадающий список: сверху или снизу.
                    Если установлено <i>auto</i>, положение будет определяться автоматически.
                </td>
            </tr>
            <tr>
                <td>caseSensitive</td>
                <td>true, false</td>
                <td>false</td>
                <td>
                    Искать с учетом регистра или без (все строки приводятся к нижнему регистру)
                </td>
            </tr>
            <tr>
                <td>searchByEntry</td>
                <td>true, false</td>
                <td>false</td>
                <td>
                    Включает поиск по вхождению
                </td>
            </tr>
            <tr>
                <td>sort</td>
                <td>true, false</td>
                <td>false</td>
                <td>
                    Если true - список сортируется
                </td>
            </tr>
            <tr>
                <td>sortBy</td>
                <td>String</td>
                <td>displayedProperty</td>
                <td>
                    Свойство объекта, по которому идёт сортировка
                </td>
            </tr>
            <tr>
                <td>sortOrder</td>
                <td>asc, desc</td>
                <td>asc</td>
                <td>
                    Определяет порядок сортировки
                </td>
            </tr>
            <tr>
                <td>isValidElement</td>
                <td>function</td>
                <td>всегда true</td>
                <td>
                    Функция для фильтрации некорректных значений. Должна возвращать false, если передаваемый объект не
                    должен участовать в поиске
                </td>
            </tr>
            <tr>
                <td>ownValue</td>
                <td>true, false</td>
                <td>false</td>
                <td>
                    Если true, разрешается указывать свое значение, при этом выводится предупреждение
                </td>
            </tr>
            <tr>
                <td>minHeight</td>
                <td>Number</td>
                <td>200</td>
                <td>
                    Минимальная высота, в которую будет может уместиться выпадающий список. Если снизу столько пространства нет - список покажется сверху
                    (пикс.)
                </td>
            </tr>
            <tr>
                <td>maxHeight</td>
                <td>Number</td>
                <td>450</td>
                <td>
                    Максимальная высота выпадающего списка (пикс.)
                </td>
            </tr>
            </tbody>
        </table>
    </section>
    <section>
        <h2>События</h2>
        <h3>onselect</h3>
        <p>
            Событие возникает, когда был выбран или введён элемент из списка. Обработать событие можно, установив callback на onselect
        </p>
        <pre class="  language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> cityAutocomplete <span class="token operator">=</span> <span class="token function">Autocomplete</span><span class="token punctuation">(</span><span class="token string">'.autocomplete'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
cityAutocomplete<span class="token punctuation">.</span>onselect <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Object {Id: 123, City: "Екатеринбург"}</span></code></pre>

    </section>

    <section>
        <h2>Сборка</h2>
        <p>Собрать исходный код проекта можно с помощью npm</p>
        <pre class="  language-bash"><code class="  language-bash"><span class="token function">cd</span> /path/to/project
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> build</code></pre>
        <p>При вызове команды <code class="language-bash">npm build:prod</code> будут сгенерированы минифицированные файлы</p>
    </section>

    <section>
        <h2>Дополнительные примеры</h2>
        <p>Автокомплит с поиском по вхождению</p>
        <div class="demo">
            <label for="city">Город</label>
            <div class="autocomplete-wrapper">
                <input id="searchByEntry" type="text" class="autocomplete" placeholder="Начните вводить код или название">
            </div>
        </div>
    </section>

    <footer>
        Автор: <a
            href="mailto:ac1298@mail.ru">Алексей Евлампьев</a>
    </footer>
</div>


<script src="../dist/js/autocomplete.js"></script>
<script src="prism.js"></script>
<script src="index.js"></script>
</body>
</html>